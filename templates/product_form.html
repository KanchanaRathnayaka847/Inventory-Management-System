{% extends 'base.html' %}

{% block title %}{% if product %}Edit{% else %}Add{% endif %} Product - Inventory System{% endblock %}

{% block content %}
  <div class="card">
    <h1>{% if product %}Edit{% else %}Add{% endif %} Product</h1>
    <form method="post" style="display:flex; flex-direction:column; gap:10px;">
      <label>Name: <input name="name" value="{{ product.name if product else '' }}"/></label>
      <label>Category:
        <select name="category_id">
          <option value="">-- Select Category --</option>
          {% for c in categories or [] %}
            <option value="{{ c.id }}" {% if product and product.category_id == c.id %}selected{% endif %}>{{ c.name }}</option>
          {% endfor %}
        </select>
      </label>
      <small style="color:#555;">Optional: keep a free-text category for legacy data.</small>
      <label>Legacy Category (text): <input name="category" value="{{ product.category if product else '' }}"/></label>
      <label>Quantity: <input type="number" name="quantity" value="{{ product.quantity if product else 0 }}"/></label>
      <label>Price: <input type="number" step="0.01" name="price" value="{{ product.price if product else 0.0 }}"/></label>
      <label>Reorder Level: <input type="number" name="reorder_level" value="{{ product.reorder_level if product else 0 }}"/></label>
      <div style="display:flex; gap:8px;">
        <button class="button" type="submit">Save</button>
        <a class="button btn-ghost" href="{{ url_for('products') }}">Back</a>
      </div>
    </form>
  </div>
{% endblock %}
