{% extends 'base.html' %}

{% block title %}Products - Inventory System{% endblock %}

{% block content %}
  <h1>Products</h1>
  <p>{% if current_user %}<a href="{{ url_for('add_product') }}">Add product</a> | {% endif %}<a href="{{ url_for('home') }}">Home</a></p>
  {% if products %}
    <table border="1" cellpadding="6">
      <thead>
        <tr>
          <th>Name</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Reorder Level</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for p in products %}
        <tr>
          <td>{{ p.name }}</td>
          <td>{{ p.category }}</td>
          <td>{{ p.quantity }}</td>
          <td>{{ '%.2f'|format(p.price) }}</td>
          <td>{{ p.reorder_level }}</td>
          <td>
            {% if current_user %}
            <a href="{{ url_for('edit_product', product_id=p.id) }}">Edit</a>
            <form method="post" action="{{ url_for('delete_product', product_id=p.id) }}" style="display:inline">
              <button type="submit">Delete</button>
            </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No products yet.</p>
  {% endif %}
{% endblock %}
